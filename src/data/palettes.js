// palettes.js - Color palette definitions and utilities

const colorPalettes = [
  { 
    name: 'Fire_Ice', 
    colors: [[5,5,20], [25,15,50], [40,20,80], [60,40,110], [80,60,140], [130,50,110], [180,40,80], [200,60,60], [220,80,40], [230,120,50], [240,160,60], [248,190,100], [255,220,140]]
  },
  { 
    name: 'Tropical_Sunset', 
    colors: [[10,5,25], [55,12,52], [100,20,80], [140,40,90], [180,60,100], [200,80,90], [220,100,80], [230,130,80], [240,160,80], [248,180,90], [255,200,100], [255,220,140], [255,240,180]]
  },
  { 
    name: 'Ocean_Depths', 
    colors: [[5,10,20], [12,25,50], [20,40,80], [30,60,110], [40,80,140], [60,110,160], [80,140,180], [100,160,190], [120,180,200], [140,200,210], [160,220,220], [180,230,230], [200,240,240]]
  },
  { 
    name: 'Royal_Spectrum', 
    colors: [[10,5,20], [35,12,60], [60,20,100], [90,40,130], [120,60,160], [150,80,170], [180,100,180], [200,110,160], [220,120,140], [230,140,130], [240,160,120], [248,190,150], [255,220,180]]
  },
  { 
    name: 'Volcanic_Fury', 
    colors: [[10,5,5], [35,7,12], [60,10,20], [90,20,25], [120,30,30], [150,45,30], [180,60,30], [200,90,35], [220,120,40], [230,150,60], [240,180,80], [248,205,110], [255,230,140]]
  },
  { 
    name: 'Electric_Rainbow', 
    colors: [[10,5,30], [45,22,85], [80,40,140], [110,50,160], [140,60,180], [160,70,160], [180,80,140], [190,100,120], [200,120,100], [210,140,100], [220,160,100], [230,180,120], [240,200,140], [248,220,170], [255,240,200]]
  },
  { 
    name: 'Mystic_Forest', 
    colors: [[10,15,20], [25,37,50], [40,60,80], [50,80,100], [60,100,120], [80,120,120], [100,140,120], [120,160,110], [140,180,100], [160,190,100], [180,200,100], [200,210,120], [220,220,140]]
  },
  { 
    name: 'Desert_Mirage', 
    colors: [[15,10,25], [47,25,42], [80,40,60], [110,60,70], [140,80,80], [160,100,80], [180,120,80], [200,140,90], [220,160,100], [230,180,120], [240,200,140], [248,215,160], [255,230,180]]
  },
  { 
    name: 'Cosmic_Nebula', 
    colors: [[5,5,15], [32,12,47], [60,20,80], [80,30,100], [100,40,120], [120,60,130], [140,80,140], [160,100,150], [180,120,160], [190,140,180], [200,160,200], [210,180,220], [220,200,240]]
  },
  
  // === HIGH-ENERGY SPECTRAL ===
  {
    name: 'Hyperion',
    colors: [[5,5,30], [42,12,95], [80,20,160], [110,40,190], [140,60,220], [160,80,210], [180,100,200], [200,130,180], [220,160,160], [238,190,180], [255,220,200]]
  },

  // === COSMIC / DEEP SPACE ===
  {
    name: 'Event_Horizon',
    colors: [[2,2,10], [11,6,35], [20,10,60], [40,20,90], [60,30,120], [90,55,140], [120,80,160], [150,110,180], [180,140,200], [200,170,220], [220,200,240]]
  },
  {
    name: 'Dark_Nebula',
    colors: [[5,5,15], [22,7,37], [40,10,60], [60,25,90], [80,40,120], [100,60,150], [120,80,180], [150,110,200], [180,140,220], [200,170,238], [220,200,255]]
  },
  {
    name: 'Stellar_Core',
    colors: [[5,5,10], [42,12,25], [80,20,40], [120,40,60], [160,60,80], [190,90,100], [220,120,120], [238,150,140], [255,180,160], [255,205,185], [255,230,210]]
  },

  // === ELECTRIC / NEON ===
  {
    name: 'Neon_Drift',
    colors: [[5,10,20], [22,25,90], [40,40,160], [60,80,200], [80,120,240], [100,160,248], [120,200,255], [150,220,238], [180,240,220], [210,248,230], [240,255,240]]
  },
  {
    name: 'Cyber_Spectrum',
    colors: [[10,5,30], [45,22,115], [80,40,200], [110,60,228], [140,80,255], [170,100,238], [200,120,220], [220,150,200], [240,180,180], [248,210,200], [255,240,220]]
  },
  {
    name: 'Laser_Bloom',
    colors: [[5,5,20], [62,22,120], [120,40,220], [160,60,230], [200,80,240], [220,110,220], [240,140,200], [248,170,180], [255,200,160], [255,220,190], [255,240,220]]
  },

  // === ORGANIC / NATURE ===
  {
    name: 'Emerald_Canopy',
    colors: [[5,10,10], [12,35,25], [20,60,40], [30,90,60], [40,120,80], [60,140,100], [80,160,120], [110,180,140], [140,200,160], [170,220,180], [200,240,200]]
  },
  {
    name: 'Bioluminescence',
    colors: [[5,10,20], [12,45,60], [20,80,100], [30,110,130], [40,140,160], [60,170,180], [80,200,200], [120,220,210], [160,240,220]]
  },
  {
    name: 'Autumn_Flux',
    colors: [[10,5,5], [45,17,12], [80,30,20], [110,45,30], [140,60,40], [170,90,50], [200,120,60], [220,150,80], [240,180,100], [248,205,130], [255,230,160]]
  },

  // === PASTEL BUT HIGH CONTRAST ===
  {
    name: 'Opal_Mist',
    colors: [[10,10,20], [45,35,70], [80,60,120], [110,90,150], [140,120,180], [170,150,200], [200,180,220], [220,200,230], [240,220,240]]
  },
  {
    name: 'Iridescent_Sky',
    colors: [[10,10,30], [35,45,95], [60,80,160], [90,110,190], [120,140,220], [150,170,230], [180,200,240], [210,220,248], [240,240,255]]
  },

  // === MULTI-HUE CHAOS (FRACTAL FAVORITES) ===
  {
    name: 'Chromatic_Vortex',
    colors: [[5,5,25], [42,12,85], [80,20,140], [110,40,170], [140,60,200], [170,80,180], [200,100,160], [220,130,140], [240,160,120], [248,190,150], [255,220,180]]
  },
  {
    name: 'Prismatic_Chaos',
    colors: [[10,5,30], [35,22,95], [60,40,160], [90,60,190], [120,80,220], [150,100,200], [180,120,180], [200,140,150], [220,160,120], [238,190,160], [255,220,200]]
  },
  {
    name: 'Aurora_Storm',
    colors: [[5,10,25], [22,45,72], [40,80,120], [50,110,140], [60,140,160], [80,170,170], [100,200,180], [130,220,190], [160,240,200], [190,248,210], [220,255,220]]
  },

  {
    name: 'Quantum_Jellyfish',
    colors: [
      [80, 40, 200],
      [140, 80, 240],
      [60, 180, 220],
      [120, 240, 180],
      [200, 220, 120],
      [240, 140, 180],
      [200, 80, 220],
      [120, 60, 200]
    ]
  },{
    name: 'Ion_Storm',
    colors: [
      [220, 80, 60],
      [240, 160, 80],
      [120, 220, 140],
      [60, 200, 220],
      [100, 120, 240],
      [180, 80, 220],
      [240, 120, 160]
    ]
  },
  {
    name: 'Plasma_Serpent',
    colors: [
      [200, 60, 100],
      [240, 100, 60],
      [220, 200, 80],
      [80, 220, 140],
      [60, 180, 240],
      [120, 80, 220],
      [200, 60, 180]
    ]
  },{
    name: 'Phase_Shift',
    colors: [
      [140, 60, 160],
      [80, 140, 220],
      [180, 220, 140],
      [220, 140, 80],
      [160, 80, 140],
      [100, 160, 200],
      [200, 180, 120]
    ]
  },
  {
    name: 'Luminance_Wave',
    colors: [
      [120, 120, 180],
      [180, 80, 140],
      [100, 160, 200],
      [200, 160, 100],
      [140, 200, 160],
      [160, 120, 200]
    ]
  },
  {
    name: 'Photosynthetic',
    colors: [
      [100, 200, 100],
      [160, 220, 120],
      [200, 180, 80],
      [180, 120, 100],
      [120, 140, 180],
      [100, 180, 160]
    ]
  },{
    name: 'Iteration_Riot',
    colors: [
      [220, 60, 60],
      [240, 140, 60],
      [200, 220, 80],
      [100, 240, 160],
      [60, 200, 240],
      [100, 120, 240],
      [180, 80, 220],
      [240, 120, 180]
    ]
  },
  {
    name: 'Escape_Velocity',
    colors: [
      [160, 80, 200],
      [100, 140, 240],
      [80, 200, 200],
      [140, 240, 140],
      [220, 200, 80],
      [240, 120, 120],
      [200, 80, 160]
    ]
  }
];

function interpolateColor(c1, c2, t) {
  const ease = t * t * (3 - 2 * t);
  return [
    Math.round(c1[0] + (c2[0] - c1[0]) * ease),
    Math.round(c1[1] + (c2[1] - c1[1]) * ease),
    Math.round(c1[2] + (c2[2] - c1[2]) * ease)
  ];
}

function getColorFromPalette(normalized, palette) {
  const position = normalized * (palette.colors.length - 1);
  const index = Math.floor(position);
  const t = position - index;
  
  if (index >= palette.colors.length - 1) {
    return palette.colors[palette.colors.length - 1];
  }
  
  return interpolateColor(palette.colors[index], palette.colors[index + 1], t);
}

function getRandomPalette() {
  return colorPalettes[Math.floor(Math.random() * colorPalettes.length)];
}

function getPaletteByName(name) {
  return colorPalettes.find(p => p.name === name);
}

module.exports = {
  colorPalettes,
  getColorFromPalette,
  getRandomPalette,
  getPaletteByName
};